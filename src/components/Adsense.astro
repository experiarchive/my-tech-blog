---
// src/components/Adsense.astro
export interface Props {
  slot: string; // ê´‘ê³  ë‹¨ìœ„ ìŠ¬ë¡¯ ID
  format?: string; // ê´‘ê³  í˜•ì‹ (ì„ íƒ ì‚¬í•­)
}
const { slot, format = 'auto' } = Astro.props;

const adClient = import.meta.env.PUBLIC_ADSENSE_CLIENT;
---

<ins class="adsbygoogle"
     style="display:block; width:100%; min-height:250px;"
     data-ad-client="ca-pub-3505313580947440"
     data-ad-slot={slot}
     data-ad-format={format}
     data-full-width-responsive="true"></ins>
<script define:vars={{slot}}>
     // DOMì´ ì™„ì „íˆ ë Œë”ë§ëœ í›„ ì‹¤í–‰í•˜ë„ë¡ ì§€ì—°
     setTimeout(() => {
          console.log('ğŸ¯ AdSense: Initializing slot ' + slot);
          try {
               (adsbygoogle = window.adsbygoogle || []).push({});
               console.log('âœ… AdSense: Slot ' + slot + ' initialized');
               
               // 5ì´ˆ í›„ ê´‘ê³  ìƒíƒœ í™•ì¸
               setTimeout(() => {
                    const adElement = document.currentScript?.previousElementSibling;
                    if (adElement && adElement.classList.contains('adsbygoogle')) {
                         console.log('ğŸ“Š AdSense Status for slot ' + slot + ':', {
                              status: adElement.getAttribute('data-ad-status'),
                              height: adElement.offsetHeight,
                              innerHTML: adElement.innerHTML.substring(0, 100)
                         });
                    }
               }, 5000);
               
          } catch (error) {
               console.error('âŒ AdSense: Error with slot ' + slot + ':', error);
          }
     }, 100);
</script> 