---
// src/components/Adsense.astro
export interface Props {
  slot: string; // ê´‘ê³  ë‹¨ìœ„ ìŠ¬ë¡¯ ID
  format?: string; // ê´‘ê³  í˜•ì‹ (ì„ íƒ ì‚¬í•­)
}
const { slot, format = 'auto' } = Astro.props;

const adClient = import.meta.env.PUBLIC_ADSENSE_CLIENT;
---

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client={adClient}
     data-ad-slot={slot}
     data-ad-format={format}
     data-full-width-responsive="true"></ins>
<script is:inline>
     function initializeAd() {
          console.log('ğŸ” AdSense: Detailed diagnostics');
          console.log('ğŸ“Š window.adsbygoogle:', typeof window.adsbygoogle, window.adsbygoogle);
          console.log('ğŸ¯ Script element:', document.querySelector('script[src*="adsbygoogle.js"]'));
          console.log('ğŸŒ Network status:', navigator.onLine);
          
          // ìš°ì„  ê¸°ë³¸ ë°©ì‹ìœ¼ë¡œ ì‹œë„ (medianincome.html ë°©ì‹)
          try {
               console.log('ğŸš€ AdSense: Trying direct initialization');
               (adsbygoogle = window.adsbygoogle || []).push({});
               console.log('âœ… AdSense: Direct push successful');
          } catch (error) {
               console.error('âŒ AdSense: Direct push failed:', error);
               console.log('ğŸ“‹ Error details:', {
                    message: error.message,
                    stack: error.stack,
                    adsbygoogle: window.adsbygoogle
               });
          }
     }
     
     // ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì‹¤í–‰
     console.log('ğŸ¬ AdSense: Starting initialization');
     
     // ì¦‰ì‹œ ì‹¤í–‰
     initializeAd();
     
     // DOM ë¡œë“œ í›„ì—ë„ ì‹¤í–‰
     if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initializeAd);
     }
     
     // ìœˆë„ìš° ë¡œë“œ í›„ì—ë„ ì‹¤í–‰
     window.addEventListener('load', initializeAd);
</script> 