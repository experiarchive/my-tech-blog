---
import { client } from '../../sanity/client';
import BaseLayout from '../layouts/BaseLayout.astro';

// 최신 포스트 가져오기 (썸네일 없이)
const query = `*[_type == "post"] | order(publishedAt desc)[0...6] {
	title,
	"slug": slug.current,
	publishedAt,
	excerpt
}`;

const posts = await client.fetch(query);
---

<BaseLayout title="Home | Lintrahub" description="기술과 건강에 관한 유용한 정보를 공유하는 블로그입니다.">
	<div class="gp-container">
		<!-- 히어로 섹션 -->
		<section style="text-align: center; padding: 60px 0; border-bottom: 1px solid var(--gp-border);">
			<h1 style="font-size: 2.5rem; font-weight: 700; color: var(--gp-text); margin-bottom: 16px; line-height: 1.2;">
				Lintrahub
			</h1>
			<p style="font-size: 1.125rem; color: var(--gp-text-light); max-width: 600px; margin: 0 auto; line-height: 1.6;">
				기술과 건강에 관한 유용한 정보를 공유하는 블로그입니다. 일상에서 도움이 되는 실용적인 지식을 전달합니다.
			</p>
		</section>

		<!-- 최신 포스트 섹션 -->
		<section style="padding: 60px 0;">
			<h2 style="font-size: 1.875rem; font-weight: 600; color: var(--gp-text); margin-bottom: 40px; text-align: center;">
				Latest Posts
			</h2>
			
			{posts && posts.length > 0 && (
				<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto;">
					{posts.map((post: any) => (
						<article class="gp-post-card">
							<a href={`/posts/${post.slug}`} style="text-decoration: none; color: inherit; display: block;">
								{/* 포스트 콘텐츠 */}
								<div class="gp-post-content">
									<div class="gp-post-meta">
										{new Date(post.publishedAt).toLocaleDateString('ko-KR', { 
											year: 'numeric', 
											month: 'long', 
											day: 'numeric' 
										})}
									</div>
									
									<h3 class="gp-post-title">
										{post.title}
									</h3>
									
									{post.excerpt && (
										<p class="gp-post-excerpt line-clamp-3">
											{post.excerpt}
										</p>
									)}
									
									<div class="gp-read-more">
										Read more
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<path d="M5 12h14M12 5l7 7-7 7"/>
										</svg>
									</div>
								</div>
							</a>
						</article>
					))}
				</div>
			)}
			
			{/* 더 많은 포스트 보기 링크 */}
			<div style="text-align: center; margin-top: 50px;">
				<a 
					href="/posts" 
					style="
						display: inline-block;
						background: var(--gp-primary);
						color: white;
						padding: 12px 24px;
						border-radius: 6px;
						text-decoration: none;
						font-weight: 500;
						transition: background-color 0.2s ease;
					"
					onmouseover="this.style.background='var(--gp-primary-dark)'"
					onmouseout="this.style.background='var(--gp-primary)'"
				>
					View All Posts
				</a>
			</div>
		</section>

		<!-- 소개 섹션 -->
		<section style="padding: 60px 0; background: var(--gp-background-secondary); margin: 0 -20px; padding-left: 20px; padding-right: 20px;">
			<div style="max-width: 800px; margin: 0 auto; text-align: center;">
				<h2 style="font-size: 1.875rem; font-weight: 600; color: var(--gp-text); margin-bottom: 24px;">
					About Lintrahub
				</h2>
				<p style="font-size: 1.125rem; color: var(--gp-text-light); line-height: 1.7; margin-bottom: 24px;">
					복잡한 기술을 쉽게 설명하고, 건강한 삶을 위한 실용적인 정보를 제공합니다. 
					매주 새로운 글을 통해 여러분의 일상에 도움이 되는 지식을 나누고 있습니다.
				</p>
				<div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 32px;">
					<div style="text-align: center;">
						<div style="font-size: 2rem; font-weight: 700; color: var(--gp-primary); margin-bottom: 8px;">
							{posts ? posts.length * 5 : 0}+
						</div>
						<div style="color: var(--gp-text-light); font-size: 14px;">
							Articles Published
						</div>
					</div>
					<div style="text-align: center;">
						<div style="font-size: 2rem; font-weight: 700; color: var(--gp-primary); margin-bottom: 8px;">
							10K+
						</div>
						<div style="color: var(--gp-text-light); font-size: 14px;">
							Monthly Readers
						</div>
					</div>
					<div style="text-align: center;">
						<div style="font-size: 2rem; font-weight: 700; color: var(--gp-primary); margin-bottom: 8px;">
							5+
						</div>
						<div style="color: var(--gp-text-light); font-size: 14px;">
							Years Experience
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</BaseLayout>

<style>
	@media (max-width: 640px) {
		.gp-post-card {
			margin: 0 -20px 30px -20px;
			border-radius: 0;
			border-left: none;
			border-right: none;
		}
	}
</style>